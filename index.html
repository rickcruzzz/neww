import React, { useState, useEffect } from 'react';
import { CheckSquare, Square, Clock, BookOpen, Code, Wifi, Shield, Calendar, Play, Pause, RotateCcw, Coffee } from 'lucide-react';

const PlanoEstudos = () => {
  const [tarefasConcluidas, setTarefasConcluidas] = useState({});
  const [semanaAtual, setSemanaAtual] = useState(1);
  const [diaAtual, setDiaAtual] = useState('Segunda');
  const [pomodoroAtivo, setPomodoroAtivo] = useState(false);
  const [tempoPomodoro, setTempoPomodoro] = useState(25 * 60); // 25 minutos em segundos
  const [tipoSessao, setTipoSessao] = useState('foco'); // 'foco' ou 'pausa'
  const [ciclosCompletos, setCiclosCompletos] = useState(0);

  const toggleTarefa = (id) => {
    setTarefasConcluidas(prev => ({
      ...prev,
      [id]: !prev[id]
    }));
  };

  const iniciarPomodoro = () => {
    setPomodoroAtivo(true);
  };

  const pausarPomodoro = () => {
    setPomodoroAtivo(false);
  };

  const resetarPomodoro = () => {
    setPomodoroAtivo(false);
    if (tipoSessao === 'foco') {
      setTempoPomodoro(25 * 60);
    } else {
      setTempoPomodoro(5 * 60);
    }
  };

  const proximaSessao = () => {
    if (tipoSessao === 'foco') {
      setTipoSessao('pausa');
      setTempoPomodoro(5 * 60);
      setCiclosCompletos(prev => prev + 1);
    } else {
      setTipoSessao('foco');
      setTempoPomodoro(25 * 60);
    }
    setPomodoroAtivo(false);
  };

  useEffect(() => {
    let intervalo;
    if (pomodoroAtivo && tempoPomodoro > 0) {
      intervalo = setInterval(() => {
        setTempoPomodoro(prev => prev - 1);
      }, 1000);
    } else if (tempoPomodoro === 0) {
      proximaSessao();
      // Som de notifica√ß√£o simulado
      alert(tipoSessao === 'foco' ? '‚è∞ Tempo de pausa! (5 min)' : '‚è∞ Volta ao foco! (25 min)');
    }
    return () => clearInterval(intervalo);
  }, [pomodoroAtivo, tempoPomodoro, tipoSessao]);

  const formatarTempo = (segundos) => {
    const mins = Math.floor(segundos / 60);
    const segs = segundos % 60;
    return `${mins.toString().padStart(2, '0')}:${segs.toString().padStart(2, '0')}`;
  };

  const cronogramaSemanal = {
    1: {
      titulo: "Semana 1 - Fundamentos",
      sistemas: "Revis√£o: Sistemas Num√©ricos (Bin√°rio, Octal, Hex, Decimal)",
      conectividade: "Fundamentos de Redes - Modelo OSI",
      seguranca: "Portas L√≥gicas - AND, OR, NOT, NAND",
      javascript: "Introdu√ß√£o ao JS - Vari√°veis e Tipos de Dados"
    },
    2: {
      titulo: "Semana 2 - Opera√ß√µes e L√≥gica", 
      sistemas: "Opera√ß√µes entre sistemas num√©ricos",
      conectividade: "Endere√ßamento IPv4 - Classes de IP",
      seguranca: "Portas L√≥gicas - XOR, NOR, XNOR",
      javascript: "Operadores e Estruturas Condicionais"
    },
    3: {
      titulo: "Semana 3 - C√°lculos e Estruturas",
      sistemas: "Arquitetura de Computadores b√°sica",
      conectividade: "C√°lculos de Sub-rede - M√°scara de Rede", 
      seguranca: "Circuitos Combinacionais",
      javascript: "Loops e Arrays"
    },
    4: {
      titulo: "Semana 4 - Aplica√ß√£o Pr√°tica",
      sistemas: "Componentes de Hardware",
      conectividade: "VLSM e Subnetting avan√ßado",
      seguranca: "Flip-Flops e Mem√≥ria",
      javascript: "Fun√ß√µes e Objetos"
    }
  };

  const rotinaCompleta = {
    Segunda: {
      manha: "07:00-08:30 | Conectividade (1h) + JavaScript (30min)",
      aula: "08:50-11:40 | Aula: Ambientes Computacionais e Conectividade",
      tarde: "17:00-18:00 | Revis√£o da aula + Exerc√≠cios pr√°ticos",
      noite: "Livre"
    },
    Ter√ßa: {
      manha: "07:00-08:30 | Conectividade (1h) + Exerc√≠cios IP (30min)", 
      aula: "08:50-11:40 | Aula: Ambientes Computacionais e Conectividade",
      tarde: "17:00-17:30 | JavaScript (leve)",
      noite: "17:30-19:00 | Academia ‚Üí Igreja"
    },
    Quarta: {
      manha: "07:00-08:30 | JavaScript Intensivo (1h30)",
      aula: "Livre - sem aulas",
      tarde: "17:00-18:30 | Sistemas Computacionais + Revis√£o",
      noite: "Livre"
    },
    Quinta: {
      manha: "07:00-08:30 | Seguran√ßa (1h) + Sistemas (30min)",
      aula: "08:50-11:40 | Aula: Ambientes Computacionais e Seguran√ßa", 
      tarde: "17:00-17:30 | JavaScript (leve)",
      noite: "17:30-19:00 | Academia ‚Üí Igreja"
    },
    Sexta: {
      manha: "07:00-08:30 | JavaScript + Projetos (1h30)",
      aula: "Livre - sem aulas",
      tarde: "17:00-18:30 | Revis√£o Geral + Exerc√≠cios",
      noite: "Livre"
    },
    Sabado: {
      manha: "08:00-10:00 | Projetos JavaScript + Exerc√≠cios Pr√°ticos",
      aula: "Livre",
      tarde: "Livre ou revis√£o opcional",
      noite: "Descanso"
    },
    Domingo: {
      manha: "Opcional: 30min revis√£o leve",
      aula: "Descanso",
      tarde: "Descanso", 
      noite: "Descanso"
    }
  };

  return (
    <div className="max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
      <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h1 className="text-3xl font-bold text-center mb-2 text-indigo-800">
          üìö Rotina Completa - ADS + JavaScript
        </h1>
        <p className="text-center text-gray-600 mb-4">
          Estudo matinal + Aulas + Revis√£o com Pomodoro
        </p>
      </div>

      {/* Timer Pomodoro */}
      <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 className="text-xl font-bold mb-4 text-red-600 flex items-center">
          üçÖ Timer Pomodoro
        </h2>
        
        <div className="flex items-center justify-center space-x-6 mb-4">
          <div className="text-center">
            <div className={`text-6xl font-bold ${tipoSessao === 'foco' ? 'text-red-600' : 'text-green-600'}`}>
              {formatarTempo(tempoPomodoro)}
            </div>
            <p className="text-lg font-medium mt-2">
              {tipoSessao === 'foco' ? 'üéØ Foco' : '‚òï Pausa'}
            </p>
          </div>
        </div>
        
        <div className="flex justify-center space-x-4 mb-4">
          <button
            onClick={iniciarPomodoro}
            disabled={pomodoroAtivo}
            className="flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"
          >
            <Play className="w-4 h-4 mr-2" />
            Iniciar
          </button>
          
          <button
            onClick={pausarPomodoro}
            disabled={!pomodoroAtivo}
            className="flex items-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50"
          >
            <Pause className="w-4 h-4 mr-2" />
            Pausar
          </button>
          
          <button
            onClick={resetarPomodoro}
            className="flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"
          >
            <RotateCcw className="w-4 h-4 mr-2" />
            Reset
          </button>
        </div>
        
        <div className="text-center">
          <p className="text-sm text-gray-600">
            Ciclos Completos: <span className="font-bold text-indigo-600">{ciclosCompletos}</span>
          </p>
        </div>
      </div>

      <div className="grid lg:grid-cols-2 gap-6 mb-6">
        {/* Rotina do Dia */}
        <div className="bg-white rounded-lg shadow-lg p-6">
          <h2 className="text-xl font-bold mb-4 text-indigo-700 flex items-center">
            <Calendar className="mr-2" />
            Rotina Di√°ria
          </h2>
          
          <div className="flex flex-wrap gap-2 mb-4">
            {Object.keys(rotinaCompleta).map(dia => (
              <button
                key={dia}
                onClick={() => setDiaAtual(dia)}
                className={`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${
                  diaAtual === dia 
                    ? 'bg-indigo-600 text-white' 
                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                }`}
              >
                {dia}
              </button>
            ))}
          </div>
          
          <div className="space-y-3">
            <div className="p-3 bg-orange-50 rounded-lg">
              <h3 className="font-semibold text-orange-800 mb-1">üåÖ Manh√£</h3>
              <p className="text-sm text-orange-700">{rotinaCompleta[diaAtual].manha}</p>
            </div>
            
            <div className="p-3 bg-blue-50 rounded-lg">
              <h3 className="font-semibold text-blue-800 mb-1">üéì Per√≠odo de Aula</h3>
              <p className="text-sm text-blue-700">{rotinaCompleta[diaAtual].aula}</p>
            </div>
            
            <div className="p-3 bg-purple-50 rounded-lg">
              <h3 className="font-semibold text-purple-800 mb-1">üåÜ Tarde</h3>
              <p className="text-sm text-purple-700">{rotinaCompleta[diaAtual].tarde}</p>
            </div>
            
            <div className="p-3 bg-gray-50 rounded-lg">
              <h3 className="font-semibold text-gray-800 mb-1">üåô Noite</h3>
              <p className="text-sm text-gray-700">{rotinaCompleta[diaAtual].noite}</p>
            </div>
          </div>
        </div>

        {/* Cronograma Semanal */}
        <div className="bg-white rounded-lg shadow-lg p-6">
          <h2 className="text-xl font-bold mb-4 text-indigo-700 flex items-center">
            <BookOpen className="mr-2" />
            Conte√∫do da Semana
          </h2>
          
          <div className="flex justify-center mb-4">
            <div className="flex space-x-2">
              {[1, 2, 3, 4].map(num => (
                <button
                  key={num}
                  onClick={() => setSemanaAtual(num)}
                  className={`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${
                    semanaAtual === num 
                      ? 'bg-indigo-600 text-white' 
                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                  }`}
                >
                  Sem {num}
                </button>
              ))}
            </div>
          </div>
          
          <div className="space-y-3">
            <div className="p-3 bg-blue-50 rounded-lg">
              <h3 className="font-semibold text-blue-800 flex items-center mb-2">
                <BookOpen className="mr-2 w-4 h-4" />
                Sistemas Computacionais
              </h3>
              <p className="text-sm text-blue-700">{cronogramaSemanal[semanaAtual].sistemas}</p>
            </div>
            
            <div className="p-3 bg-green-50 rounded-lg">
              <h3 className="font-semibold text-green-800 flex items-center mb-2">
                <Wifi className="mr-2 w-4 h-4" />
                Conectividade
              </h3>
              <p className="text-sm text-green-700">{cronogramaSemanal[semanaAtual].conectividade}</p>
            </div>
            
            <div className="p-3 bg-red-50 rounded-lg">
              <h3 className="font-semibold text-red-800 flex items-center mb-2">
                <Shield className="mr-2 w-4 h-4" />
                Seguran√ßa
              </h3>
              <p className="text-sm text-red-700">{cronogramaSemanal[semanaAtual].seguranca}</p>
            </div>
            
            <div className="p-3 bg-yellow-50 rounded-lg">
              <h3 className="font-semibold text-yellow-800 flex items-center mb-2">
                <Code className="mr-2 w-4 h-4" />
                JavaScript
              </h3>
              <p className="text-sm text-yellow-700">{cronogramaSemanal[semanaAtual].javascript}</p>
            </div>
          </div>
        </div>
      </div>

      {/* Rotina Detalhada por Hor√°rio */}
      <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 className="text-xl font-bold mb-4 text-indigo-700">
          ‚è∞ Rotina Completa com Pomodoros
        </h2>
        
        <div className="grid lg:grid-cols-2 gap-6">
          {/* Dias com Aula */}
          <div>
            <h3 className="font-bold text-gray-800 mb-3">üìÖ Segunda, Ter√ßa e Quinta (Dias de Aula)</h3>
            <div className="space-y-2 text-sm">
              <div className="p-2 bg-orange-50 rounded border-l-4 border-orange-400">
                <strong>07:00-08:30</strong> - Estudo Matinal FOCADO
                <br />‚Ä¢ 3 Pomodoros: APENAS a mat√©ria do dia (sem JS)
              </div>
              <div className="p-2 bg-blue-50 rounded border-l-4 border-blue-400">
                <strong>08:50-11:40</strong> - Aulas na Faculdade
                <br />‚Ä¢ Conectividade (Seg/Ter) ou Seguran√ßa (Qui)
              </div>
              <div className="p-2 bg-purple-50 rounded border-l-4 border-purple-400">
                <strong>12:00-17:00</strong> - IMERS√ÉO na Mat√©ria
                <br />‚Ä¢ 10 Pomodoros: Revis√£o + Exerc√≠cios + Pr√°tica INTENSIVA
              </div>
              <div className="p-2 bg-red-100 rounded border-l-4 border-red-400">
                <strong>17:00+</strong> - OFF TOTAL
                <br />‚Ä¢ Academia/Igreja ou tempo livre
              </div>
            </div>
          </div>

          {/* Dias Livres */}
          <div>
            <h3 className="font-bold text-gray-800 mb-3">üÜì Quarta, Sexta e S√°bado (JavaScript + Geral)</h3>
            <div className="space-y-2 text-sm">
              <div className="p-2 bg-yellow-50 rounded border-l-4 border-yellow-400">
                <strong>07:00-08:30</strong> - JavaScript Intensivo
                <br />‚Ä¢ 3 Pomodoros focados em JavaScript
              </div>
              <div className="p-2 bg-green-50 rounded border-l-4 border-green-400">
                <strong>12:00-17:00</strong> - Mix Geral
                <br />‚Ä¢ 10 Pomodoros: JavaScript + Sistemas + Revis√£o das mat√©rias
              </div>
              <div className="p-2 bg-red-100 rounded border-l-4 border-red-400">
                <strong>17:00+</strong> - OFF TOTAL
                <br />‚Ä¢ Tempo livre, descanso, vida pessoal
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Checklist Di√°rio */}
      <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
        <h2 className="text-xl font-bold mb-4 text-indigo-700">
          ‚úÖ Checklist Di√°rio
        </h2>
        
        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
          {[
            { id: 'estudo_manha', tarefa: 'Estudo matinal completo', icone: 'üåÖ' },
            { id: 'revisao_aula', tarefa: 'Revis√£o p√≥s-aula', icone: 'üìù' },
            { id: 'javascript_diario', tarefa: 'Pr√°tica di√°ria de JS', icone: 'üíª' },
            { id: 'exercicios', tarefa: 'Exerc√≠cios pr√°ticos', icone: 'üßÆ' },
            { id: 'resumo', tarefa: 'Resumo dos aprendizados', icone: 'üìã' },
            { id: 'descanso', tarefa: 'Pausa adequada entre estudos', icone: 'üò¥' }
          ].map(item => (
            <div 
              key={item.id}
              className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${
                tarefasConcluidas[item.id] 
                  ? 'bg-green-50 border-green-300' 
                  : 'bg-gray-50 border-gray-200 hover:border-indigo-300'
              }`}
              onClick={() => toggleTarefa(item.id)}
            >
              <div className="flex items-center space-x-3">
                {tarefasConcluidas[item.id] ? (
                  <CheckSquare className="w-5 h-5 text-green-600" />
                ) : (
                  <Square className="w-5 h-5 text-gray-400" />
                )}
                
                <div className="flex-1">
                  <span className="text-lg mr-2">{item.icone}</span>
                  <span className="text-sm font-medium text-gray-800">{item.tarefa}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Estrutura dos Pomodoros */}
      <div className="bg-white rounded-lg shadow-lg p-6">
        <h2 className="text-xl font-bold mb-4 text-indigo-700">
          üçÖ Como Usar os Pomodoros
        </h2>
        
        <div className="grid md:grid-cols-3 gap-4 mb-4">
          <div className="p-4 bg-red-50 rounded-lg text-center">
            <div className="text-2xl mb-2">üéØ</div>
            <h3 className="font-bold text-red-800">25 min</h3>
            <p className="text-sm text-red-700">Foco Total</p>
          </div>
          
          <div className="p-4 bg-green-50 rounded-lg text-center">
            <div className="text-2xl mb-2">‚òï</div>
            <h3 className="font-bold text-green-800">5 min</h3>
            <p className="text-sm text-green-700">Pausa Curta</p>
          </div>
          
          <div className="p-4 bg-blue-50 rounded-lg text-center">
            <div className="text-2xl mb-2">üèñÔ∏è</div>
            <h3 className="font-bold text-blue-800">15-30 min</h3>
            <p className="text-sm text-blue-700">Pausa Longa (a cada 4 ciclos)</p>
          </div>
        </div>

        <div className="bg-yellow-50 p-4 rounded-lg">
          <h3 className="font-semibold text-yellow-800 mb-2">üí° Dicas para M√°ximo Aproveitamento:</h3>
          <ul className="text-sm text-yellow-700 space-y-1">
            <li>‚Ä¢ üîï Celular no silencioso durante os pomodoros</li>
            <li>‚Ä¢ üìö Tenha todo material organizado antes de come√ßar</li>
            <li>‚Ä¢ ‚úèÔ∏è Anote d√∫vidas rapidamente, mas s√≥ resolva na pausa</li>
            <li>‚Ä¢ üíß Use pausas para hidratar e esticar</li>
            <li>‚Ä¢ üß† Manh√£ cedo = melhor absor√ß√£o de conte√∫do novo</li>
            <li>‚Ä¢ üîÑ Tarde = revis√£o e pr√°tica do que aprendeu</li>
          </ul>
        </div>
      </div>
    </div>
  );
};

export default PlanoEstudos;
